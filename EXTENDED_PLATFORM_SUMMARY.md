# üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ STM32G431CB - –ü–æ–ª–Ω–∞—è –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ Renode

–î–∞—Ç–∞: 2025-10-05

---

## ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û READY-MADE PERIPHERALS

### **UART/USART (4 —à—Ç):**
```repl
usart1: UART.STM32F7_USART @ sysbus 0x40013800
usart2: UART.STM32F7_USART @ sysbus 0x40004400
usart3: UART.STM32F7_USART @ sysbus 0x40004800
lpuart1: UART.STM32F7_USART @ sysbus 0x40008000
```

### **GPIO Ports (6 —à—Ç):**
```repl
gpioPortA-F: GPIOPort.STM32_GPIOPort
  - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ GPIO —Å AF routing
  - –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ EXTI
  - numberOfAFs: 16
```

### **SPI (3 —à—Ç):**
```repl
spi1: SPI.STM32SPI @ sysbus 0x40013000
spi2: SPI.STM32SPI @ sysbus 0x40003800
spi3: SPI.STM32SPI @ sysbus 0x40003C00
```

### **I2C (3 —à—Ç):**
```repl
i2c1-3: I2C.STM32F7_I2C
  - Event –∏ Error interrupts
  - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è I2C —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```

### **Timers (9 —à—Ç):**
```repl
TIM1, TIM2 (32-bit), TIM3, TIM4, TIM6, TIM7, TIM8, TIM15, TIM16, TIM17
  - –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ç–∞–π–º–µ—Ä–æ–≤ (basic, general-purpose, advanced)
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ IRQ mappings
  - TIM2 - 32-–±–∏—Ç–Ω—ã–π!
```

### **ADC (2 —à—Ç):**
```repl
adc1: Analog.STM32_ADC @ sysbus 0x50000000
adc2: Analog.STM32_ADC @ sysbus 0x50000100
```

### **RTC:**
```repl
rtc: Timers.STM32F4_RTC @ sysbus 0x40002800
  - Real-Time Clock
  - –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ EXTI
```

### **DMA (2 —à—Ç):**
```repl
dma1: DMA.STM32G0DMA @ sysbus 0x40020000
dma2: DMA.STM32G0DMA @ sysbus 0x40020400
  - 8 –∫–∞–Ω–∞–ª–æ–≤ –∫–∞–∂–¥—ã–π
```

### **FDCAN:**
```repl
fdcan1: CAN.MCAN @ sysbus 0x40006400
  - Bosch M_CAN IP
  - Shared Message RAM (10KB)
  - IT0 –∏ IT1 interrupts
```

### **EXTI:**
```repl
exti: IRQControllers.STM32F4_EXTI
  - 43 –ª–∏–Ω–∏–∏
  - Combined inputs –¥–ª—è NVIC
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–õ–ê–¢–§–û–†–ú–´

### **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ peripherals:**
**~45+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤!**

### **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
- **Ready-Made (75%):** 30+ peripherals –∏–∑ Renode
- **Python Custom (25%):** 5 peripherals —Å custom logic (RCC, FLASH, PWR, DBGMCU, DMAMUX)

### **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- **Communication:** UART√ó4, SPI√ó3, I2C√ó3, FDCAN√ó1 = 11
- **Timers:** TIM√ó9, RTC√ó1 = 10
- **GPIO:** 6 ports (A-F) + EXTI = 7
- **Analog:** ADC√ó2 = 2
- **DMA:** DMA1, DMA2, DMAMUX = 3
- **System:** NVIC, RCC, FLASH, PWR, DBGMCU = 5
- **Memory:** FLASH, SRAM, CAN Message RAM = 3
- **CPU:** Cortex-M4 = 1

**Total: 42+ peripherals**

---

## üèÜ –†–ï–ó–£–õ–¨–¢–ê–¢

**–ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç –ü–†–û–•–û–î–ò–¢:** ‚úÖ `Should Boot And Show Banner`

**UART –≤—ã–≤–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
===========================================
  CLN17 v2.0 Joint Firmware
  Target: STM32G431CB @ 170 MHz
  Framework: Embassy + iRPC
===========================================
```

---

## üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ü–û–õ–ù–û–ô –ü–õ–ê–¢–§–û–†–ú–´

### 1. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ STM32G431CB
- Firmware –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –ù–µ –±—É–¥–µ—Ç "non existing peripheral" –æ—à–∏–±–æ–∫

### 2. **Ready for Complex Testing**
- –ú–æ–∂–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SPI, I2C, ADC
- –ú–æ–∂–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã
- –ú–æ–∂–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å GPIO routing

### 3. **–ü–æ–ª–Ω–∞—è –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ Renode**
- 75% peripherals - –≥–æ—Ç–æ–≤—ã–µ –∏–∑ Renode
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Community support

### 4. **Scalability**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –í—Å–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —É–∂–µ –µ—Å—Ç—å
- –ü—Ä–æ—Å—Ç–æ copy-paste –∏–∑ –¥—Ä—É–≥–∏—Ö STM32 platforms

---

## ‚ö†Ô∏è –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç
- ‚úÖ UART –±–∞–Ω–Ω–µ—Ä –≤—ã–≤–æ–¥–∏—Ç—Å—è
- ‚úÖ 42+ peripherals —ç–º—É–ª–∏—Ä—É—é—Ç—Å—è
- ‚úÖ Embassy executor —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- üî¥ –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–µ—Ç "System Ready")
- üî¥ Heartbeat –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- üî¥ CAN/FOC tasks –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–≤–∏—Å–∞—é—Ç

**–í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –ü—Ä–æ—à–∏–≤–∫–∞ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –º–µ–∂–¥—É –±–∞–Ω–Ω–µ—Ä–æ–º –∏ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- Async executor –∏–ª–∏ task scheduling issue
- UART logger task –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–∞—Ç—å

---

## üéØ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### **–ú–æ–∂–Ω–æ –µ—â–µ –¥–æ–±–∞–≤–∏—Ç—å:**
- USB (USBDeprecated.STM32_USB)
- COMP (–∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä—ã)
- OPAMP (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–∏–ª–∏—Ç–µ–ª–∏)
- CRC peripheral
- IWDG/WWDG (watchdogs)
- QUADSPI (–¥–ª—è –≤–Ω–µ—à–Ω–µ–π flash)

### **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ:**
1. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ I2C sensors
2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ SPI devices
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å virtual CAN bus
4. –≠–º—É–ª–∏—Ä–æ–≤–∞—Ç—å ADC inputs

---

## üìà –ü–†–û–ì–†–ï–°–° –°–ï–°–°–ò–ò

**–ù–∞—á–∞–ª–∏ —Å:** 0 ready-made peripherals, –≤—Å–µ Python stubs
**–°–µ–π—á–∞—Å:** 30+ ready-made peripherals (75% —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã Renode!)

**–≠—Ç–∞–ø—ã:**
1. ‚úÖ –ë–∞–∑–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (CPU, Memory, NVIC)
2. ‚úÖ UART + GPIO + Timers
3. ‚úÖ FDCAN (MCAN) + DMA + EXTI
4. ‚úÖ SPI + I2C + ADC + RTC + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ UART
5. ‚úÖ –í—Å–µ GPIO ports (A-F)
6. ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã (TIM1-8, 15-17)

---

## üèÅ –ò–¢–û–ì

**–ú–´ –°–û–ó–î–ê–õ–ò –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò –ü–û–õ–ù–£–Æ –≠–ú–£–õ–Ø–¶–ò–Æ STM32G431CB!**

–ò—Å–ø–æ–ª—å–∑—É—è **–º–∞–∫—Å–∏–º—É–º —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã Renode**, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ Comprehensive (42+ peripherals)
- ‚úÖ Ready-made (75% –∏–∑ Renode)
- ‚úÖ Extensible (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ)
- ‚úÖ Professional (–Ω–µ –∫–æ—Å—Ç—ã–ª–∏, –∞ –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è)

**Async Embassy —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —ç—Ç–æ–π –ø–æ–ª–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ!** üéâ

---

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –ø–æ—á–µ–º—É –ø—Ä–æ—à–∏–≤–∫–∞ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø–æ–ª–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É.
